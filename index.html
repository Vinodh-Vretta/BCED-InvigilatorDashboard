<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCED Invigilation Dashboard - Reskinned</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f2f5; /* Matching the light grey background */
        }
        .header-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
        }
        .main-content {
            background-color: #ffffff;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }
        .btn-primary {
            background-color: #2c5cc5;
            color: white;
            border-radius: 4px;
            padding: 8px 16px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: #234a9e;
        }
        .btn-secondary {
            background-color: #e0e0e0;
            color: #333;
            border-radius: 4px;
            padding: 8px 16px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
         .btn-secondary:hover {
            background-color: #d1d1d1;
        }
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 4px;
        }
        .status-dot.online { background-color: #4caf50; }
        .status-dot.offline { background-color: #d32f2f; }
        .status-dot.disconnected { background-color: #ffc107; } /* Yellow for disconnected */
        .scan-issue { color: #d32f2f; font-weight: 500; }
        .table-cell-border {
            border-right: 1px solid #e0e0e0;
        }
        .access-code-box {
            background-color: #fce4ec; /* Light pink background */
            border: 1px solid #f8bbd0;
            border-radius: 6px;
            padding: 8px 16px;
            text-align: center;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Login Page -->
    <div id="login-page">
        <div class="min-h-screen flex items-center justify-center bg-gray-100">
            <div class="max-w-md w-full bg-white p-8 rounded-lg shadow-lg">
                <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">BCED Assessment Invigilation</h2>
                <form id="login-form">
                    <div class="space-y-6">
                        <div>
                            <label for="access-code" class="block text-sm font-medium text-gray-700">Invigilator Access Code</label>
                            <input type="text" id="access-code" name="access-code" value="PROCTOR-A1" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <label for="school-district" class="block text-sm font-medium text-gray-700">School District</label>
                            <select id="school-district" name="school-district" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option>Saanich</option>
                                <option>Vancouver</option>
                                <option>Surrey</option>
                            </select>
                        </div>
                        <div>
                            <label for="school-name" class="block text-sm font-medium text-gray-700">School Name</label>
                            <select id="school-name" name="school-name" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                                <option>Mount Douglas Secondary</option>
                                <option>Oak Bay High School</option>
                            </select>
                        </div>
                        <div>
                            <label for="session-code" class="block text-sm font-medium text-gray-700">Assessment Session Code/Password</label>
                            <input type="password" id="session-code" name="session-code" value="12345" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <div>
                            <button type="submit" class="w-full btn-primary py-2">
                                Enter Session
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Dashboard Page (Initially Hidden) -->
    <div id="dashboard-page" class="hidden">
        <header class="header-bar px-6 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4 text-sm">
                <a href="#" class="text-gray-600 hover:text-blue-600">Classic Viewings</a>
                <span>/</span>
                <a href="#" class="text-gray-600 hover:text-blue-600">Testing Class</a>
                 <span>/</span>
                <span class="text-gray-800 font-medium">Sample Test</span>
            </div>
            <div class="flex items-center space-x-4">
                <button id="tech-support-btn" class="text-sm font-medium text-blue-600 hover:underline">Technical Support</button>
                <button id="message-centre-btn" class="text-sm font-medium text-blue-600 hover:underline">Message Centre</button>
            </div>
        </header>

        <main class="p-6">
            <div class="main-content">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-start">
                        <div>
                            <h1 class="text-2xl font-medium">BCED Numeracy Assessment</h1>
                            <p id="school-date-info" class="text-sm text-gray-500 mt-1">Mount Douglas Secondary • July 8, 2025</p>
                        </div>
                        <div class="access-code-box">
                            <p class="text-xs text-gray-700">ACCESS CODE</p>
                            <p class="text-xl font-bold tracking-widest text-pink-800">X3J4-M3H8</p>
                            <p class="text-xs text-gray-700">FOR THIS ASSESSMENT SESSION</p>
                        </div>
                    </div>
                     <p class="text-sm text-gray-600 mt-4">
                        Number of students with access to the assessment session: <strong id="total-students-count" class="font-medium text-gray-800">0</strong>
                    </p>
                </div>
                
                <div class="p-6">
                     <div class="flex justify-between items-center mb-4">
                        <input type="text" id="search-input" placeholder="Search by Student Name or PEN" class="px-3 py-2 border border-gray-300 rounded-md w-full max-w-sm focus:outline-none focus:ring-1 focus:ring-blue-500">
                        <div>
                            <label for="group-filter" class="text-sm font-medium text-gray-700 mr-2">Filter by Group:</label>
                            <select id="group-filter" class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500">
                                <option value="all">All Groups</option>
                                <option value="Group A">Group A</option>
                                <option value="Group B">Group B</option>
                            </select>
                        </div>
                    </div>
                    <table class="w-full text-sm text-left table-fixed">
                        <thead class="border-b-2 border-gray-300">
                            <tr>
                                <th scope="col" class="py-2 px-3 font-medium text-gray-700 w-[20%]">PEN</th>
                                <th scope="col" class="py-2 px-3 font-medium text-blue-700 w-[40%]">
                                    <button id="sort-by-name-btn" class="w-full text-left">First Name / Last Name <span id="sort-indicator">◆</span></button>
                                </th>
                                <th scope="col" class="py-2 px-3 font-medium text-gray-700 w-[40%]">Status</th>
                            </tr>
                        </thead>
                        <tbody id="student-table-body">
                            <!-- Student rows will be injected here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals remain the same -->
    <div id="unsubmit-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Unsubmit Assessment</h3>
            <p class="text-sm text-gray-500 mb-6">
                Are you sure you want to unsubmit the assessment for <strong id="student-name-modal"></strong>? This will allow them to re-enter and complete their test. This action cannot be undone.
            </p>
            <div class="flex justify-end space-x-4">
                <button id="cancel-unsubmit" type="button" class="btn-secondary">Cancel</button>
                <button id="confirm-unsubmit" type="button" class="btn-primary">Confirm Unsubmit</button>
            </div>
        </div>
    </div>
    <div id="tech-support-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl p-8 w-full max-w-lg mx-4">
            <h3 class="text-xl font-medium text-gray-900 mb-4">Information centre hours:</h3>
            <p class="text-lg text-gray-700 mb-6">
                <strong class="font-semibold">Monday to Friday:</strong><br>
                8:00 a.m. to 5:00 p.m. (EST)
            </p>
            <div class="border rounded-md overflow-hidden">
                <table class="w-full">
                    <tbody>
                        <tr class="border-b">
                            <td class="p-3 font-medium bg-gray-50 w-1/3">Email</td>
                            <td class="p-3 text-blue-600 font-medium">bced-support@vretta.com</td>
                        </tr>
                        <tr>
                            <td class="p-3 font-medium bg-gray-50 w-1/3">Phone Number</td>
                            <td class="p-3 font-medium">1 888-327-7377</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="mt-6 text-center">
                <button id="dismiss-support-modal" class="bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-6 rounded-md">
                    Dismiss Notification
                </button>
            </div>
        </div>
    </div>
    <div id="message-centre-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 h-3/4 flex flex-col">
            <div class="p-4 border-b">
                <h2 class="text-xl font-semibold text-gray-800">Message Centre</h2>
            </div>
            <div class="p-4 border-b flex space-x-1">
                <button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md">All Messages</button>
                <button class="px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-md">Unread Messages</button>
                <button class="px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-md">Archived Messages</button>
            </div>
            <div class="flex-grow p-4 overflow-y-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b">
                            <th class="py-2 px-3 text-left font-medium text-gray-600">Subject</th>
                            <th class="py-2 px-3 text-left font-medium text-gray-600">Sent On</th>
                            <th class="py-2 px-3 text-left font-medium text-gray-600">Archive</th>
                        </tr>
                    </thead>
                </table>
                <div class="flex items-center justify-center h-full text-gray-500">
                    No Rows To Show
                </div>
            </div>
            <div class="p-4 border-t">
                <div class="w-full h-2 bg-gray-200 rounded-full">
                    <div class="w-1/4 h-full bg-gray-400 rounded-full"></div>
                </div>
            </div>
             <div class="text-center pb-4">
                 <button id="dismiss-message-modal" class="text-sm font-medium text-blue-600 hover:underline">Close</button>
            </div>
        </div>
    </div>
    <div id="student-info-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg mx-4">
            <div class="p-4 border-b">
                <h2 class="text-xl font-semibold text-gray-800">View/Edit Student Info</h2>
            </div>
            <div class="p-6">
                <table class="w-full text-sm">
                    <tbody>
                        <tr class="border-b">
                            <td class="py-3 px-2 font-medium text-gray-600 w-1/3">PEN</td>
                            <td id="info-pen" class="py-3 px-2"></td>
                        </tr>
                        <tr class="border-b">
                            <td class="py-3 px-2 font-medium text-gray-600">First Name</td>
                            <td id="info-first-name" class="py-3 px-2"></td>
                        </tr>
                         <tr class="border-b">
                            <td class="py-3 px-2 font-medium text-gray-600">Last Name</td>
                            <td id="info-last-name" class="py-3 px-2"></td>
                        </tr>
                        <tr class="border-b">
                            <td class="py-3 px-2 font-medium text-gray-600">Gender</td>
                            <td id="info-gender" class="py-3 px-2"></td>
                        </tr>
                        <tr class="border-b">
                            <td class="py-3 px-2 font-medium text-gray-600">Accommodations</td>
                            <td id="info-accommodations" class="py-3 px-2"></td>
                        </tr>
                        <tr class="border-b">
                            <td class="py-3 px-2 font-medium text-gray-600">Notes from the Teacher</td>
                            <td id="info-notes" class="py-3 px-2"></td>
                        </tr>
                         <tr class="border-b">
                            <td class="py-3 px-2 font-medium text-gray-600">Assistive Technology</td>
                            <td id="info-assistive-tech" class="py-3 px-2"></td>
                        </tr>
                        <tr>
                            <td class="py-3 px-2 font-medium text-gray-600">Non-participation Status</td>
                            <td id="info-non-participation" class="py-3 px-2"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="p-4 bg-gray-50 text-right border-t">
                 <button id="ok-student-info-modal" class="btn-primary">OK</button>
            </div>
        </div>
    </div>

<script type="module">
    // Firebase Imports
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, collection, doc, getDocs, onSnapshot, setDoc, updateDoc, query, where, writeBatch } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // --- FIREBASE CONFIG & INITIALIZATION ---
    // These variables are placeholders and will be provided by the environment.
    const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : { apiKey: "...", authDomain: "...", projectId: "..." };
    const appId = typeof __app_id !== 'undefined' ? __app_id : 'bced-demo-app';
    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : undefined;

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);

    let userId;
    let studentsCollectionRef;
    let unsubscribe; // To store the onSnapshot listener

    // --- MOCK DATA ---
    const initialStudents = [
        { id: '1', pen: '123456789', firstName: 'Emma', lastName: 'Thompson', group: 'Group A', connectionStatus: 'online', status: 'In Progress', stage: 1, question: 3, time: 429566 },
        { id: '2', pen: '987654321', firstName: 'Michael', lastName: 'Chen', group: 'Group A', connectionStatus: 'offline', status: 'Submitted', stage: null, question: null, time: 8946 },
        { id: '3', pen: '456789123', firstName: 'Sarah', lastName: 'Johnson', group: 'Group B', connectionStatus: 'online', status: 'Submitted', stage: null, question: null, time: 394 },
        { id: '4', pen: '789123456', firstName: 'David', lastName: 'Rodriguez', group: 'Group B', connectionStatus: 'disconnected', status: 'In Progress', stage: 2, question: 5, time: 0 },
        { id: '5', pen: '321654987', firstName: 'Jessica', lastName: 'Wu', group: 'Group A', connectionStatus: 'online', status: 'Submitted', stage: null, question: null, time: 0 },
        { id: '6', pen: '234567890', firstName: 'Amanda', lastName: 'Singh', group: 'Group B', connectionStatus: 'online', status: 'Not Started', stage: null, question: null, time: 0 },
        { id: '7', pen: '345678901', firstName: 'James', lastName: 'Wilson', group: 'Group A', connectionStatus: 'offline', status: 'Ready to Start', stage: null, question: null, time: 0 },
    ];
    
    let students = [];
    let sortDirection = 'none';

    // --- DOM ELEMENTS ---
    const loginPage = document.getElementById('login-page');
    const dashboardPage = document.getElementById('dashboard-page');
    const loginForm = document.getElementById('login-form');
    const schoolDateInfo = document.getElementById('school-date-info');
    const totalStudentsCount = document.getElementById('total-students-count');
    const tableBody = document.getElementById('student-table-body');
    const searchInput = document.getElementById('search-input');
    const groupFilter = document.getElementById('group-filter');
    const sortByNameBtn = document.getElementById('sort-by-name-btn');
    const sortIndicator = document.getElementById('sort-indicator');
    const unsubmitModal = document.getElementById('unsubmit-modal');
    const studentNameUnsubmitModal = document.getElementById('student-name-modal');
    const confirmUnsubmitBtn = document.getElementById('confirm-unsubmit');
    const cancelUnsubmitBtn = document.getElementById('cancel-unsubmit');
    const techSupportBtn = document.getElementById('tech-support-btn');
    const techSupportModal = document.getElementById('tech-support-modal');
    const dismissSupportModalBtn = document.getElementById('dismiss-support-modal');
    const messageCentreBtn = document.getElementById('message-centre-btn');
    const messageCentreModal = document.getElementById('message-centre-modal');
    const dismissMessageModalBtn = document.getElementById('dismiss-message-modal');
    const studentInfoModal = document.getElementById('student-info-modal');
    const okStudentInfoBtn = document.getElementById('ok-student-info-modal');

    // --- FUNCTIONS ---
    async function seedData() {
        const snapshot = await getDocs(studentsCollectionRef);
        if (snapshot.empty) {
            console.log('No data found, seeding initial data...');
            const batch = writeBatch(db);
            initialStudents.forEach(student => {
                const docRef = doc(studentsCollectionRef, student.id);
                batch.set(docRef, student);
            });
            await batch.commit();
            console.log('Seeding complete.');
        } else {
            console.log('Data already exists, skipping seed.');
        }
    }
    
    function renderTable(studentData) {
        tableBody.innerHTML = '';
        totalStudentsCount.textContent = studentData.length;

        if (studentData.length === 0) {
            tableBody.innerHTML = `<tr><td colspan="3" class="text-center py-8 text-gray-500">No students found.</td></tr>`;
            return;
        }

        studentData.forEach(student => {
            const row = document.createElement('tr');
            row.className = 'border-b border-gray-200 hover:bg-gray-50';
            
            let connectionStatusClass = 'offline';
            if (student.connectionStatus === 'online') connectionStatusClass = 'online';
            if (student.connectionStatus === 'disconnected') connectionStatusClass = 'disconnected';
            
            let statusContent = '';
            if (student.status === 'Submitted') {
                statusContent = `<div>
                                    <button class="unsubmit-btn text-blue-700 hover:underline text-sm font-medium" data-student-id="${student.id}" data-student-name="${student.firstName} ${student.lastName}">Unsubmit</button>
                                    <p class="text-xs text-gray-500">${student.time} minute(s)</p>
                                 </div>`;
            } else if (student.status === 'In Progress') {
                 statusContent = `<div>
                                    <p class="font-medium">Stage ${student.stage}, Question ${student.question}</p>
                                    <p class="text-xs text-gray-500">${student.time} minute(s)</p>
                                 </div>`;
            } else {
                statusContent = `<p class="font-medium text-gray-700">${student.status}</p>`;
            }

            let statusBgClass = '';
            if (student.status === 'Ready to Start') statusBgClass = 'bg-[#fff3e0]';
            else if (student.status === 'Not Started') statusBgClass = 'bg-gray-100';

            row.innerHTML = `
                <td class="py-3 px-3 table-cell-border">
                    <button class="show-pen-btn text-gray-800 hover:text-blue-600 text-sm font-medium" data-pen="${student.pen}">Show PEN</button>
                </td>
                <td class="py-3 px-3 table-cell-border">
                    <button class="student-name-btn text-blue-700 font-medium hover:underline" data-student-id="${student.id}">${student.firstName} ${student.lastName}</button>
                    <div class="text-xs text-gray-700 mt-1">
                        <span class="status-dot ${connectionStatusClass}"></span>
                        <span>${student.connectionStatus.charAt(0).toUpperCase() + student.connectionStatus.slice(1)}</span>
                    </div>
                </td>
                <td class="py-3 px-3 ${statusBgClass}">${statusContent}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    function updateView(studentData) {
        let displayedStudents = [...studentData];
        const searchTerm = searchInput.value.toLowerCase();
        if (searchTerm) {
            displayedStudents = displayedStudents.filter(student => 
                `${student.firstName} ${student.lastName}`.toLowerCase().includes(searchTerm) || 
                student.pen.toLowerCase().includes(searchTerm)
            );
        }

        if (sortDirection !== 'none') {
            displayedStudents.sort((a, b) => {
                const nameA = `${a.lastName} ${a.firstName}`.toLowerCase();
                const nameB = `${b.lastName} ${b.firstName}`.toLowerCase();
                if (nameA < nameB) return sortDirection === 'asc' ? -1 : 1;
                if (nameA > nameB) return sortDirection === 'asc' ? 1 : -1;
                return 0;
            });
        }
        
        renderTable(displayedStudents);
    }

    function setupRealtimeListener() {
        if (unsubscribe) unsubscribe(); // Detach any old listener

        let q = query(studentsCollectionRef);
        const selectedGroup = groupFilter.value;
        if (selectedGroup !== 'all') {
            q = query(studentsCollectionRef, where("group", "==", selectedGroup));
        }

        unsubscribe = onSnapshot(q, (snapshot) => {
            students = snapshot.docs.map(doc => ({ ...doc.data(), id: doc.id }));
            updateView(students);
        });
    }
    
    async function handleUnsubmit() {
        const studentId = confirmUnsubmitBtn.dataset.studentId;
        const studentDocRef = doc(db, `artifacts/${appId}/users/${userId}/students`, studentId);
        await updateDoc(studentDocRef, { status: 'Ready to Start' });
        closeUnsubmitModal();
    }
    
    // --- REALTIME SIMULATOR ---
    function startRealtimeSimulator() {
        setInterval(async () => {
            if (students.length > 0) {
                const randomIndex = Math.floor(Math.random() * students.length);
                const randomStudent = students[randomIndex];
                const statuses = ['online', 'disconnected', 'offline'];
                const currentStatusIndex = statuses.indexOf(randomStudent.connectionStatus);
                const nextStatus = statuses[(currentStatusIndex + 1) % statuses.length];
                
                const studentDocRef = doc(db, `artifacts/${appId}/users/${userId}/students`, randomStudent.id);
                await updateDoc(studentDocRef, { connectionStatus: nextStatus });
            }
        }, 3000); // Update every 3 seconds
    }

    // --- EVENT LISTENERS ---
    loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        if (initialAuthToken) {
            await signInWithCustomToken(auth, initialAuthToken);
        } else {
            await signInAnonymously(auth);
        }
        userId = auth.currentUser.uid;
        studentsCollectionRef = collection(db, `artifacts/${appId}/users/${userId}/students`);

        await seedData();
        setupRealtimeListener();
        
        const selectedSchool = document.getElementById('school-name').value;
        const currentDate = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        schoolDateInfo.textContent = `${selectedSchool} • ${currentDate}`;
        
        loginPage.classList.add('hidden');
        dashboardPage.classList.remove('hidden');
        startRealtimeSimulator();
    });
    
    searchInput.addEventListener('keyup', () => updateView(students));
    groupFilter.addEventListener('change', setupRealtimeListener);
    sortByNameBtn.addEventListener('click', () => {
        if (sortDirection === 'none') sortDirection = 'asc';
        else if (sortDirection === 'asc') sortDirection = 'desc';
        else sortDirection = 'none';
        sortIndicator.innerHTML = sortDirection === 'asc' ? '▲' : sortDirection === 'desc' ? '▼' : '◆';
        updateView(students);
    });
    
    tableBody.addEventListener('click', function(e) {
        const unsubmitButton = e.target.closest('.unsubmit-btn');
        if (unsubmitButton) {
            studentNameUnsubmitModal.textContent = unsubmitButton.dataset.studentName;
            confirmUnsubmitBtn.dataset.studentId = unsubmitButton.dataset.studentId;
            unsubmitModal.classList.remove('hidden');
        }
    });

    confirmUnsubmitBtn.addEventListener('click', handleUnsubmit);
    cancelUnsubmitBtn.addEventListener('click', () => unsubmitModal.classList.add('hidden'));
    
</script>

</body>
</html>
